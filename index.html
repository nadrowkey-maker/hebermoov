<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>HEBERMOOV PREMIUM</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>

<body class="bg-black text-white font-sans antialiased overflow-hidden selection-none">

    <div id="ambient-aura" class="fixed inset-0 z-0 pointer-events-none">
        <div class="aura-blob bg-volt absolute top-0 left-0 w-96 h-96 rounded-full mix-blend-screen opacity-10 blur-3xl transform -translate-x-1/2 -translate-y-1/2"></div>
        <div class="aura-blob bg-white absolute bottom-0 right-0 w-96 h-96 rounded-full mix-blend-screen opacity-5 blur-3xl transform translate-x-1/3 translate-y-1/3"></div>
        <canvas id="particle-canvas" class="absolute inset-0 w-full h-full z-10"></canvas>
    </div>

    <div id="app-shell" class="relative w-full h-full z-10 flex flex-col">
        
        <div id="splash-screen" class="fixed inset-0 z-splash bg-black flex flex-col items-center justify-center transition-opacity duration-500">
            <div class="w-24 h-24 rounded-full bg-volt flex items-center justify-center animate-pulse mb-8 shadow-volt">
                <i class="fas fa-bolt text-black text-4xl"></i>
            </div>
            <h1 class="text-4xl font-black tracking-tighter text-white">HEBER<span class="text-volt">MOOV</span></h1>
            <p class="text-gray-500 font-bold tracking-widest text-xs mt-2 uppercase">Initialisation du syst√®me</p>
            <div class="w-48 h-1 bg-gray-900 rounded-full mt-12 overflow-hidden relative">
                <div class="absolute top-0 left-0 h-full bg-volt transform -translate-x-full animate-loading-bar w-full"></div>
            </div>
        </div>

        <div id="onboarding-overlay" class="fixed inset-0 z-modal bg-black flex flex-col transition-opacity duration-500 hidden opacity-0">
            <div id="onboarding-slider" class="flex-1 relative w-full h-full overflow-hidden">
                <div class="slide absolute inset-0 flex flex-col px-8 pt-24 pb-32 transform transition-transform duration-500 translate-x-0" id="slide-1">
                    <div class="w-full aspect-square rounded-[40px] bg-gray-900 mb-12 flex items-center justify-center overflow-hidden relative border border-white-10">
                        <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="For√™t">
                        <i class="fas fa-tree text-6xl text-volt relative z-10 drop-shadow-volt"></i>
                    </div>
                    <h2 class="text-4xl font-black leading-tight mb-4">La nature est<br>votre <span class="text-volt">salle.</span></h2>
                    <p class="text-gray-400 text-lg leading-relaxed font-medium">Oubliez les machines. Utilisez la topographie de Rennes pour forger un corps fonctionnel.</p>
                </div>
                <div class="slide absolute inset-0 flex flex-col px-8 pt-24 pb-32 transform transition-transform duration-500 translate-x-full" id="slide-2">
                    <div class="w-full aspect-square rounded-[40px] bg-gray-900 mb-12 flex items-center justify-center overflow-hidden relative border border-white-10">
                        <img src="https://images.unsplash.com/photo-1551698618-1dfe5d97d256?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="Entra√Ænement">
                        <i class="fas fa-camera text-6xl text-white relative z-10 drop-shadow-md"></i>
                    </div>
                    <h2 class="text-4xl font-black leading-tight mb-4">Prouvez<br>votre <span class="text-white">valeur.</span></h2>
                    <p class="text-gray-400 text-lg leading-relaxed font-medium">Photographiez vos franchissements. L'algorithme et votre Squad valident votre progression.</p>
                </div>
                <div class="slide absolute inset-0 flex flex-col px-8 pt-24 pb-32 transform transition-transform duration-500 translate-x-full" id="slide-3">
                    <div class="w-full aspect-square rounded-[40px] bg-gray-900 mb-12 flex items-center justify-center overflow-hidden relative border border-white-10">
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-50" alt="Analyse">
                        <i class="fas fa-chart-radar text-6xl text-volt relative z-10 drop-shadow-volt"></i>
                    </div>
                    <h2 class="text-4xl font-black leading-tight mb-4">Analyse<br><span class="text-volt">Biom√©canique.</span></h2>
                    <p class="text-gray-400 text-lg leading-relaxed font-medium">Suivez vos 10 familles de comp√©tences. Devenez l'athl√®te ultime, pas juste un coureur.</p>
                </div>
            </div>
            <div class="absolute bottom-0 w-full p-8 bg-gradient-to-t from-black via-black to-transparent pb-safe">
                <div class="flex items-center justify-center gap-3 mb-8" id="onboarding-dots">
                    <div class="w-8 h-2 rounded-full bg-volt transition-all duration-300"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-700 transition-all duration-300"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-700 transition-all duration-300"></div>
                </div>
                <button id="btn-next-onboarding" class="w-full bg-white text-black font-black text-xl py-5 rounded-full transition-transform active:scale-95" onclick="App.nextOnboarding()">CONTINUER</button>
            </div>
        </div>

        <header id="top-nav" class="fixed top-0 w-full z-40 px-6 pt-safe pb-4 flex items-center justify-between backdrop-blur-xl bg-black/50 border-b border-white-10">
            <div class="flex flex-col">
                <span class="text-gray-400 text-[10px] font-bold uppercase tracking-widest mb-0.5" id="date-display">AUJOURD'HUI</span>
                <h1 class="text-2xl font-black tracking-tighter m-0">HEBER<span class="text-volt">MOOV.</span></h1>
            </div>
            <div class="flex items-center gap-3">
                <button class="bg-gray-900 border border-white-10 px-4 py-2 rounded-full flex items-center gap-2 hover:bg-gray-800 transition-colors" onclick="App.nav('view-profile', document.getElementById('nav-profile'))">
                    <i class="fas fa-bolt text-volt text-sm"></i>
                    <span class="font-bold text-sm" id="header-xp">0</span>
                </button>
                <button class="w-10 h-10 rounded-full bg-gray-800 border border-white-10 overflow-hidden hover:opacity-80 transition-opacity" onclick="App.nav('view-profile', document.getElementById('nav-profile'))">
                    <img src="https://ui-avatars.com/api/?name=Flavien+R&background=ccff00&color=000&font-size=0.4&bold=true" alt="Profil" class="w-full h-full object-cover">
                </button>
            </div>
        </header>

        <main id="main-content" class="relative w-full h-full z-20 overflow-y-auto overflow-x-hidden hide-scrollbar pt-28 pb-32 block">
            
            <section id="view-home" class="spa-view w-full min-h-full px-6 flex flex-col gap-6 active">
                <div class="w-full bg-gradient-to-br from-blue-900/40 to-gray-900/80 backdrop-blur-md rounded-[32px] p-5 border border-blue-500/20 flex justify-between items-center cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.showModal('weather-sheet')">
                    <div class="flex flex-col">
                        <span class="text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-1 flex items-center gap-1"><i class="fas fa-location-arrow"></i> Rennes, BZH</span>
                        <div class="flex items-end gap-3">
                            <h2 class="text-4xl font-black leading-none m-0 text-white">12¬∞</h2>
                            <span class="text-sm font-semibold text-gray-300 mb-1">Averses pr√©vues</span>
                        </div>
                    </div>
                    <div class="w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center border border-blue-500/30">
                        <i class="fas fa-cloud-showers-heavy text-3xl text-white drop-shadow-md"></i>
                    </div>
                </div>

                <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-6 border border-white-10 flex justify-between items-center relative overflow-hidden shadow-lg">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-volt opacity-10 rounded-full blur-2xl pointer-events-none"></div>
                    <div class="flex flex-col z-10">
                        <h2 class="text-gray-500 font-bold text-xs uppercase tracking-widest mb-4">Analyse Globale</h2>
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center"><i class="fas fa-fire text-red-500 text-xs"></i></div>
                            <span class="font-black text-2xl text-white" id="dash-kcal">0 <span class="text-sm text-gray-500 font-semibold">kcal</span></span>
                        </div>
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-8 h-8 rounded-full bg-volt/20 flex items-center justify-center"><i class="fas fa-dumbbell text-volt text-xs"></i></div>
                            <span class="font-black text-2xl text-white" id="dash-actions">0 <span class="text-sm text-gray-500 font-semibold">act</span></span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center"><i class="fas fa-tree text-blue-500 text-xs"></i></div>
                            <span class="font-black text-2xl text-white" id="dash-parks">0 <span class="text-sm text-gray-500 font-semibold">parcs</span></span>
                        </div>
                    </div>
                    <div class="w-28 h-28 relative z-10 flex items-center justify-center">
                        <canvas id="home-ring-chart"></canvas>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <span class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Niveau</span>
                            <span class="text-3xl font-black text-white leading-none mt-1" id="dash-level">1</span>
                        </div>
                    </div>
                </div>

                <div class="w-full h-72 rounded-[32px] relative overflow-hidden cursor-pointer group shadow-lg" onclick="App.nav('view-explore', document.getElementById('nav-explore'))">
                    <img src="https://images.unsplash.com/photo-1448375240586-882707db888b?q=80&w=800" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Gayeulles">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"></div>
                    <div class="absolute top-6 left-6 px-4 py-2 rounded-full bg-black/50 backdrop-blur-md border border-white-10 text-xs font-bold uppercase tracking-widest text-white">Terrain recommand√©</div>
                    <div class="absolute bottom-6 left-6 right-6 flex justify-between items-end">
                        <div class="flex flex-col">
                            <h3 class="text-3xl font-black leading-tight mb-2 text-white">Les<br>Gayeulles</h3>
                            <span class="text-gray-300 font-semibold text-sm"><i class="fas fa-stopwatch text-volt mr-2"></i>45 min ‚Ä¢ Force & Agilit√©</span>
                        </div>
                        <div class="w-14 h-14 rounded-full bg-white text-black flex items-center justify-center text-xl transition-transform group-hover:scale-110">
                            <i class="fas fa-play ml-1"></i>
                        </div>
                    </div>
                </div>

                <h3 class="text-xl font-black mt-2 text-white">Derni√®res Activit√©s</h3>
                <div class="flex flex-col gap-4" id="home-history-preview">
                    <div class="w-full bg-gray-900/50 rounded-2xl p-5 border border-white-5 flex items-center justify-center text-gray-500 text-sm font-medium">
                        Aucune activit√© r√©cente. La for√™t vous attend.
                    </div>
                </div>
            </section>

            <section id="view-explore" class="spa-view w-full min-h-full px-6 flex flex-col gap-6">
                <div class="flex items-end justify-between mt-2">
                    <h2 class="text-4xl font-black tracking-tighter leading-none text-white">Zones<br><span class="text-gray-500">Rennes.</span></h2>
                </div>
                
                <div class="flex flex-wrap justify-start gap-2 w-full">
                    <button class="tab-explore active px-4 py-2 rounded-full text-xs font-bold bg-white text-black transition-colors shadow-md border border-transparent" onclick="App.switchPark('gayeulles', this)">Gayeulles</button>
                    <button class="tab-explore px-4 py-2 rounded-full text-xs font-bold bg-gray-900 border border-white-10 text-gray-400 transition-colors" onclick="App.switchPark('thabor', this)">Thabor</button>
                    <button class="tab-explore px-4 py-2 rounded-full text-xs font-bold bg-gray-900 border border-white-10 text-gray-400 transition-colors" onclick="App.switchPark('beaulieu', this)">Campus Beaulieu</button>
                    <button class="tab-explore px-4 py-2 rounded-full text-xs font-bold bg-gray-900 border border-white-10 text-gray-400 transition-colors" onclick="App.switchPark('apigne', this)">Apign√©</button>
                    <button class="tab-explore px-4 py-2 rounded-full text-xs font-bold bg-gray-900 border border-white-10 text-gray-400 transition-colors" onclick="App.switchPark('stmartin', this)">St-Martin</button>
                </div>
                
                <div id="park-gayeulles" class="park-container flex flex-col gap-5">
                    <p class="text-sm text-gray-400 font-medium leading-relaxed">300 hectares de nature sauvage. Le terrain de jeu ultime pour l'H√©bertisme lourd et l'endurance.</p>
                    
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.openRoutePreview('gayeulles-1')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4">
                            <img src="https://images.unsplash.com/photo-1448375240586-882707db888b?q=80&w=800" class="absolute inset-0 w-full h-full object-cover" alt="For√™t">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Zone Nord</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black shadow-lg"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">La Ceinture Foresti√®re</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4 line-clamp-1">Endurance fondamentale et franchissement bas.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>8 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>55 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>520 kcal</span>
                            </div>
                        </div>
                    </div>

                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-red-500/30 cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.openRoutePreview('gayeulles-2')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4">
                            <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=800" class="absolute inset-0 w-full h-full object-cover grayscale opacity-80" alt="Survie">
                            <div class="absolute inset-0 bg-red-500/10 mix-blend-overlay"></div>
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-red-500 text-black text-[10px] font-bold uppercase tracking-widest">Zone Est ‚Ä¢ Survie</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-black shadow-lg"><i class="fas fa-fire-alt"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">Le C≈ìur Sombre</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4 line-clamp-1">Portage lourd et instabilit√© extr√™me. √âlite uniquement.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-red-500"><i class="fas fa-skull mr-1.5"></i>5 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>30 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>600 kcal</span>
                            </div>
                        </div>
                    </div>

                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-blue-500/30 cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.openRoutePreview('gayeulles-3')">
                        <div class="w-full h-40 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="Clairi√®re">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-blue-500 text-white text-[10px] font-bold uppercase tracking-widest">Clairi√®re Centrale</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white shadow-lg"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-xl font-black mb-1 text-white">Initiation Douce</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4 line-clamp-1">Quadrup√©die et mobilit√© basique.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-blue-400"><i class="fas fa-layer-group mr-1.5"></i>4 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>20 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>150 kcal</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="park-thabor" class="park-container flex flex-col gap-5 hidden">
                    <p class="text-sm text-gray-400 font-medium leading-relaxed">Le parc majestueux. Id√©al pour le travail d'escalier, l'explosivit√© et les appuis pr√©cis sur murets.</p>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('thabor-1')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1508349937151-22b68b72d5b1?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Marches">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Zone Sud</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">L'Enfer des Marches</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Quadrup√©die ascendante et sauts de pr√©cision.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>6 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>35 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>400 kcal</span>
                            </div>
                        </div>
                    </div>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('thabor-2')">
                        <div class="w-full h-40 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1476231682828-37e571bc172f?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Jardins">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Jardins Suspendus</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-xl font-black mb-1 text-white">√âquilibre Floral</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Travail d'appuis sur les bordures g√©om√©triques.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>5 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>25 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>200 kcal</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="park-beaulieu" class="park-container flex flex-col gap-5 hidden">
                    <p class="text-sm text-gray-400 font-medium leading-relaxed">Le campus scientifique. M√©lange parfait de b√©ton, de structures m√©talliques tubulaires et de petits bosquets.</p>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('beaulieu-1')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1511497584788-876760111969?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Urbain">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Urbain Lourd</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">B√©ton & Verdure</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Sauts d'obstacles urbains et grimp√©s de grilles.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>7 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>40 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>350 kcal</span>
                            </div>
                        </div>
                    </div>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('beaulieu-2')">
                        <div class="w-full h-40 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1425913397330-cf8af2ff40a1?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Piste">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Piste d'athl√©tisme</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-xl font-black mb-1 text-white">Sprint Universitaire</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Explosivit√© pure et lancers lourds sur piste.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>4 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>20 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>250 kcal</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="park-apigne" class="park-container flex flex-col gap-5 hidden">
                    <p class="text-sm text-gray-400 font-medium leading-relaxed">Les abords de l'eau. Sol meuble, boue et racines glissantes. Risque de chute tr√®s √©lev√©.</p>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('apigne-1')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1448375240586-882707db888b?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Etang">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Bord de l'eau</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">Le Tour des √âtangs</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Course souple longue distance et franchissements fluides.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>6 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>45 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>380 kcal</span>
                            </div>
                        </div>
                    </div>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-red-500/30 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('apigne-2')">
                        <div class="w-full h-40 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80 grayscale" alt="Marais">
                            <div class="absolute inset-0 bg-red-500/10 mix-blend-overlay"></div>
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-red-500 text-black text-[10px] font-bold uppercase tracking-widest">Marais Hostile</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-black"><i class="fas fa-fire-alt"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-xl font-black mb-1 text-white">Bain de Boue</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Ramp√©s dans la boue et r√©sistance thermique. Pr√©parez-vous √† vous salir.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-red-500"><i class="fas fa-layer-group mr-1.5"></i>8 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>60 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>550 kcal</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="park-stmartin" class="park-container flex flex-col gap-5 hidden">
                    <p class="text-sm text-gray-400 font-medium leading-relaxed">For√™t dense au nord. Terrain lourd. Excellent pour les manipulations d'objets naturels (souches, roches).</p>
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-2 border border-white-10 cursor-pointer active:scale-95 transition-transform" onclick="App.openRoutePreview('stmartin-1')">
                        <div class="w-full h-48 rounded-[24px] overflow-hidden relative mb-4 bg-gray-800">
                            <img src="https://images.unsplash.com/photo-1511497584788-876760111969?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-80" alt="For√™t Nord">
                            <div class="absolute top-4 left-4 px-3 py-1.5 rounded-full bg-black/60 backdrop-blur-md border border-white-10 text-[10px] font-bold uppercase tracking-widest text-white">Zone Principale</div>
                            <div class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-white flex items-center justify-center text-black"><i class="fas fa-play ml-1"></i></div>
                        </div>
                        <div class="px-4 pb-4">
                            <h4 class="text-2xl font-black mb-1 text-white">Sentier des B√ªcherons</h4>
                            <p class="text-xs text-gray-500 font-medium mb-4">Lancers de pr√©cision et soulev√©s de roches.</p>
                            <div class="flex items-center justify-between text-xs font-bold">
                                <span class="text-volt"><i class="fas fa-layer-group mr-1.5"></i>7 Ateliers</span>
                                <span class="text-white"><i class="fas fa-stopwatch mr-1.5"></i>50 min</span>
                                <span class="text-gray-400"><i class="fas fa-fire mr-1.5"></i>450 kcal</span>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <section id="view-challenges" class="spa-view w-full min-h-full px-6 flex flex-col gap-6">
                <div class="mt-4">
                    <h2 class="text-4xl font-black tracking-tighter leading-none mb-2 text-white">Missions &<br><span class="text-volt">R√©compenses.</span></h2>
                    <p class="text-gray-400 font-medium text-sm">Accomplissez les objectifs de l'algorithme pour financer votre √©quipement.</p>
                </div>
                
                <div class="flex items-center justify-between mt-2 mb-2">
                    <h3 class="text-xl font-black text-white">Contrats Actifs</h3>
                    <span class="text-[10px] font-bold text-gray-500 uppercase tracking-widest bg-gray-900 px-3 py-1 rounded-full border border-white-10">Reset 48h</span>
                </div>
                
                <div class="flex flex-col gap-4">
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-3xl p-5 border-l-4 border-l-volt border-t border-r border-b border-white-5 relative overflow-hidden shadow-lg">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-2xl bg-volt/10 flex items-center justify-center text-volt text-xl"><i class="fas fa-tree"></i></div>
                                <h4 class="font-black text-lg text-white">Le B√ªcheron</h4>
                            </div>
                            <span class="bg-volt text-black font-black text-xs px-3 py-1.5 rounded-full shadow-volt">+200 XP</span>
                        </div>
                        <p class="text-sm text-gray-400 font-medium mb-4">Validez 5 ateliers "Grimper" ou "Lever" en for√™t dense.</p>
                        <div class="w-full flex items-center justify-between text-xs font-bold mb-2">
                            <span class="text-gray-500">Progression</span>
                            <span class="text-white">2 / 5</span>
                        </div>
                        <div class="w-full h-3 bg-black rounded-full overflow-hidden border border-white-5">
                            <div class="h-full bg-volt rounded-full" style="width: 40%;"></div>
                        </div>
                    </div>

                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-3xl p-5 border-l-4 border-l-blue-500 border-t border-r border-b border-white-5 relative overflow-hidden shadow-lg">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-500 text-xl"><i class="fas fa-running"></i></div>
                                <h4 class="font-black text-lg text-white">Endurance Pure</h4>
                            </div>
                            <span class="bg-blue-500 text-white font-black text-xs px-3 py-1.5 rounded-full shadow-sm">+150 XP</span>
                        </div>
                        <p class="text-sm text-gray-400 font-medium mb-4">Cumulez 10km de d√©placement sur la semaine en cours.</p>
                        <div class="w-full flex items-center justify-between text-xs font-bold mb-2">
                            <span class="text-gray-500">Progression</span>
                            <span class="text-white">8.5 / 10 km</span>
                        </div>
                        <div class="w-full h-3 bg-black rounded-full overflow-hidden border border-white-5">
                            <div class="h-full bg-blue-500 rounded-full" style="width: 85%;"></div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center justify-between mt-6 mb-2">
                    <h3 class="text-xl font-black text-white">L'Arsenal</h3>
                    <div class="bg-gray-900 border border-white-10 px-4 py-2 rounded-full flex items-center gap-2">
                        <i class="fas fa-wallet text-volt text-sm"></i>
                        <span class="font-bold text-sm text-white" id="shop-wallet">0 XP</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4 pb-8">
                    <div class="bg-gray-900/50 backdrop-blur-md rounded-3xl p-5 border border-white-5 flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.buyItem('T-Shirt H√©bert', 1000)">
                        <i class="fas fa-tshirt text-4xl text-gray-500 mb-4"></i>
                        <span class="font-bold text-sm mb-2 text-white">T-Shirt Tech</span>
                        <span class="text-[10px] font-black uppercase tracking-widest bg-gray-800 px-3 py-1.5 rounded-full text-volt border border-volt/20">1000 XP</span>
                    </div>
                    <div class="bg-gray-900/50 backdrop-blur-md rounded-3xl p-5 border border-white-5 flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.buyItem('Chaussures Trail', 2500)">
                        <i class="fas fa-shoe-prints text-4xl text-gray-500 mb-4"></i>
                        <span class="font-bold text-sm mb-2 text-white">Chaussures Trail</span>
                        <span class="text-[10px] font-black uppercase tracking-widest bg-gray-800 px-3 py-1.5 rounded-full text-volt border border-volt/20">2500 XP</span>
                    </div>
                    <div class="bg-gray-900/50 backdrop-blur-md rounded-3xl p-5 border border-white-5 flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.buyItem('Gourde Survie', 500)">
                        <i class="fas fa-flask text-4xl text-gray-500 mb-4"></i>
                        <span class="font-bold text-sm mb-2 text-white">Gourde Inox</span>
                        <span class="text-[10px] font-black uppercase tracking-widest bg-gray-800 px-3 py-1.5 rounded-full text-volt border border-volt/20">500 XP</span>
                    </div>
                    <div class="bg-gray-900/50 backdrop-blur-md rounded-3xl p-5 border border-white-5 flex flex-col items-center justify-center text-center cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.buyItem('Corde Escalade', 4000)">
                        <i class="fas fa-bezier-curve text-4xl text-gray-500 mb-4"></i>
                        <span class="font-bold text-sm mb-2 text-white">Corde 15m</span>
                        <span class="text-[10px] font-black uppercase tracking-widest bg-gray-800 px-3 py-1.5 rounded-full text-volt border border-volt/20">4000 XP</span>
                    </div>
                </div>
            </section>

            <section id="view-academy" class="spa-view w-full min-h-full px-6 flex flex-col gap-6">
                <div class="mt-4 mb-2">
                    <h2 class="text-4xl font-black tracking-tighter leading-none mb-4 text-white">Th√©orie<br><span class="text-blue-500">H√©bertiste.</span></h2>
                    <div class="w-full bg-blue-500/10 border border-blue-500/30 rounded-2xl p-4 flex flex-col">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Niveau Intellectuel</span>
                            <span class="text-sm font-black text-blue-400">Initi√© (Niv. 2)</span>
                        </div>
                        <div class="w-full h-2 bg-black rounded-full overflow-hidden">
                            <div class="h-full bg-blue-500 rounded-full" style="width: 35%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="w-full h-64 rounded-[32px] bg-gray-900 border border-white-10 overflow-hidden relative cursor-pointer active:scale-95 transition-transform shadow-lg" onclick="App.showModal('article-fondamentaux-sheet')">
                    <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-50 mix-blend-luminosity" alt="Livre">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"></div>
                    <div class="absolute top-5 left-5 px-3 py-1.5 rounded-full bg-blue-500 text-white text-[10px] font-bold uppercase tracking-widest shadow-md">Dossier √Ä La Une</div>
                    <div class="absolute bottom-6 left-6 right-6 flex flex-col">
                        <h3 class="text-2xl font-black leading-tight mb-2 text-white">Les 10 Familles du Mouvement</h3>
                        <p class="text-sm text-gray-400 font-medium line-clamp-2 mb-4">Marcher, courir, sauter, grimper... Les fondations absolues de la m√©thode.</p>
                        <span class="text-blue-400 font-bold text-sm flex items-center gap-2">√âTUDIER <i class="fas fa-arrow-right"></i></span>
                    </div>
                </div>

                <h3 class="text-xl font-black mt-4 text-white">Biblioth√®que STAPS</h3>
                <div class="flex flex-col gap-4 pb-8">
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-3xl p-4 border border-white-5 flex items-center gap-5 cursor-pointer active:scale-95 transition-transform" onclick="App.showModal('article-physio-sheet')">
                        <div class="w-14 h-14 rounded-2xl bg-gray-800 border border-white-10 flex items-center justify-center"><i class="fas fa-heartbeat text-xl text-volt"></i></div>
                        <div class="flex flex-col flex-1">
                            <h4 class="font-bold text-base mb-1 text-white">Physiologie de l'effort</h4>
                            <p class="text-xs text-gray-500 font-medium line-clamp-1">Proprioception et recrutement musculaire.</p>
                        </div>
                        <i class="fas fa-chevron-right text-gray-600 mr-2"></i>
                    </div>
                    
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-3xl p-4 border border-white-5 flex items-center gap-5 cursor-pointer active:scale-95 transition-transform" onclick="App.showModal('article-survie-sheet')">
                        <div class="w-14 h-14 rounded-2xl bg-gray-800 border border-white-10 flex items-center justify-center"><i class="fas fa-campground text-xl text-warning"></i></div>
                        <div class="flex flex-col flex-1">
                            <h4 class="font-bold text-base mb-1 text-white">R√®gles de Survie</h4>
                            <p class="text-xs text-gray-500 font-medium line-clamp-1">Pr√©vention, faune et gestion du risque.</p>
                        </div>
                        <i class="fas fa-chevron-right text-gray-600 mr-2"></i>
                    </div>

                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-3xl p-4 border border-white-5 flex items-center gap-5 cursor-pointer active:scale-95 transition-transform" onclick="App.showModal('article-histoire-sheet')">
                        <div class="w-14 h-14 rounded-2xl bg-gray-800 border border-white-10 flex items-center justify-center"><i class="fas fa-ship text-xl text-blue-500"></i></div>
                        <div class="flex flex-col flex-1">
                            <h4 class="font-bold text-base mb-1 text-white">L'Histoire d'H√©bert</h4>
                            <p class="text-xs text-gray-500 font-medium line-clamp-1">L'√©ruption de la Montagne Pel√©e en 1902.</p>
                        </div>
                        <i class="fas fa-chevron-right text-gray-600 mr-2"></i>
                    </div>
                </div>
            </section>

            <section id="view-social" class="spa-view w-full min-h-full px-6 flex flex-col gap-6">
                <div class="mt-4 mb-2">
                    <h2 class="text-4xl font-black tracking-tighter leading-none mb-6 text-white">R√©seau<br><span class="text-purple-500">Rennes.</span></h2>
                    
                    <div class="w-full p-1 bg-gray-900 rounded-full border border-white-10 flex flex-row">
                        <button class="flex-1 py-3 rounded-full text-sm font-bold bg-white text-black transition-colors" id="btn-soc-feed" onclick="App.switchSocialTab('feed')">Activit√©</button>
                        <button class="flex-1 py-3 rounded-full text-sm font-bold text-gray-500 bg-transparent transition-colors" id="btn-soc-squads" onclick="App.switchSocialTab('squads')">Squads</button>
                        <button class="flex-1 py-3 rounded-full text-sm font-bold text-gray-500 bg-transparent transition-colors" id="btn-soc-leaderboard" onclick="App.switchSocialTab('leaderboard')">√âlite</button>
                    </div>
                </div>

                <div id="social-content-feed" class="social-view flex flex-col gap-6 pb-10 block">
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-5 border border-white-10 shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center font-black text-lg text-white border border-white-20">L</div>
                                <div class="flex flex-col">
                                    <span class="font-bold text-sm text-white">L√©a M. (L3 STAPS)</span>
                                    <span class="text-xs text-gray-500 font-medium"><i class="fas fa-map-marker-alt mr-1"></i>Gayeulles ‚Ä¢ Il y a 2h</span>
                                </div>
                            </div>
                            <i class="fas fa-ellipsis-h text-gray-600"></i>
                        </div>
                        <p class="text-sm font-medium leading-relaxed mb-4 text-gray-300">Session d'√©quilibre extr√™me aujourd'hui sur les troncs abattus. Le terrain boueux force le recrutement des stabilisateurs profonds ! üå≤üî•</p>
                        <div class="w-full h-48 rounded-[20px] bg-gray-800 overflow-hidden mb-4">
                            <img src="https://images.unsplash.com/photo-1448375240586-882707db888b?q=80&w=800" class="w-full h-full object-cover" alt="Post Image">
                        </div>
                        <div class="flex items-center gap-6 pt-2 border-t border-white-5">
                            <div class="flex items-center gap-2 text-red-500 font-bold text-sm"><i class="fas fa-heart"></i> 24</div>
                            <div class="flex items-center gap-2 text-gray-500 font-bold text-sm"><i class="far fa-comment"></i> 5</div>
                        </div>
                    </div>
                </div>
                
                <div id="social-content-squads" class="social-view flex flex-col gap-6 pb-10 hidden">
                    <div class="w-full bg-gray-900/80 backdrop-blur-md rounded-[32px] p-6 border-l-4 border-l-volt border-t border-r border-b border-white-10 relative overflow-hidden shadow-lg">
                        <div class="absolute top-0 right-0 w-48 h-48 bg-volt opacity-5 rounded-full blur-3xl"></div>
                        <div class="flex justify-between items-start mb-4 relative z-10">
                            <h4 class="text-2xl font-black text-white">Squad L2 Maths</h4>
                            <span class="px-3 py-1 bg-volt text-black text-[10px] font-bold uppercase tracking-widest rounded-full">Votre Squad</span>
                        </div>
                        <p class="text-sm text-gray-400 font-medium mb-6 relative z-10">L'alliance de la logique math√©matique et de la force brute. Objectif : Dominer le campus.</p>
                        <div class="flex items-center justify-between relative z-10">
                            <div class="flex -space-x-3">
                                <div class="w-10 h-10 rounded-full border-2 border-gray-900 bg-white text-black flex items-center justify-center font-bold text-xs z-30">F</div>
                                <div class="w-10 h-10 rounded-full border-2 border-gray-900 bg-blue-500 text-white flex items-center justify-center font-bold text-xs z-20">A</div>
                                <div class="w-10 h-10 rounded-full border-2 border-gray-900 bg-purple-500 text-white flex items-center justify-center font-bold text-xs z-10">L</div>
                            </div>
                            <button class="px-5 py-2.5 rounded-full bg-gray-800 border border-white-10 text-xs font-bold text-white active:scale-95 transition-transform">QG SQUAD</button>
                        </div>
                    </div>
                </div>
                
                <div id="social-content-leaderboard" class="social-view flex flex-col gap-6 pb-10 hidden">
                    <div class="w-full h-56 flex items-end justify-center gap-4 mb-4 border-b border-white-10 pb-6">
                        <div class="flex flex-col items-center w-1/4">
                            <div class="w-12 h-12 rounded-full border-2 border-gray-400 bg-gray-800 flex items-center justify-center font-black text-white mb-3 z-10 shadow-lg relative"><span class="absolute -top-1 -right-1 w-4 h-4 bg-gray-400 rounded-full text-[8px] flex items-center justify-center text-black">2</span>A</div>
                            <div class="w-full h-24 bg-gradient-to-t from-gray-400/20 to-transparent border-t-2 border-gray-400 rounded-t-lg"></div>
                            <span class="text-xs font-bold mt-3 truncate w-full text-center text-white">Antoine</span>
                            <span class="text-[10px] font-black text-gray-400">12.4k XP</span>
                        </div>
                        <div class="flex flex-col items-center w-1/3">
                            <i class="fas fa-crown text-yellow-500 text-2xl mb-2 animate-bounce"></i>
                            <div class="w-16 h-16 rounded-full border-4 border-yellow-500 bg-gray-800 flex items-center justify-center font-black text-xl text-white mb-3 z-10 shadow-lg relative"><span class="absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 rounded-full text-[10px] flex items-center justify-center text-black">1</span>L</div>
                            <div class="w-full h-32 bg-gradient-to-t from-yellow-500/20 to-transparent border-t-2 border-yellow-500 rounded-t-lg"></div>
                            <span class="text-sm font-bold mt-3 truncate w-full text-center text-white">L√©a M.</span>
                            <span class="text-[10px] font-black text-yellow-500">15.8k XP</span>
                        </div>
                        <div class="flex flex-col items-center w-1/4">
                            <div class="w-12 h-12 rounded-full border-2 border-amber-600 bg-gray-800 flex items-center justify-center font-black text-white mb-3 z-10 shadow-lg relative"><span class="absolute -top-1 -right-1 w-4 h-4 bg-amber-600 rounded-full text-[8px] flex items-center justify-center text-white">3</span>M</div>
                            <div class="w-full h-16 bg-gradient-to-t from-amber-600/20 to-transparent border-t-2 border-amber-600 rounded-t-lg"></div>
                            <span class="text-xs font-bold mt-3 truncate w-full text-center text-white">Marc</span>
                            <span class="text-[10px] font-black text-amber-600">11.2k XP</span>
                        </div>
                    </div>
                </div>
            </section>

            <section id="view-profile" class="spa-view w-full min-h-full flex flex-col">
                <div class="w-full bg-gray-900 border-b border-white-10 pt-16 pb-8 px-6 flex flex-col items-center relative overflow-hidden">
                    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+PHBhdGggZD0iTTAgMGg0MHY0MEgwVjB6bTIwIDIwYzAgMTEuMDQ2IDguOTU0IDIwIDIwIDIwVjIwSDIweiIgZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIwLjAyIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=')] opacity-20 mix-blend-overlay pointer-events-none"></div>
                    <div class="w-32 h-32 relative mb-6">
                        <svg class="absolute inset-0 w-full h-full transform -rotate-90" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="56" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="4"></circle>
                            <circle id="profile-ring" cx="60" cy="60" r="56" fill="none" stroke="#ccff00" stroke-width="4" stroke-dasharray="351.8" stroke-dashoffset="351.8" class="transition-all duration-1000 ease-out"></circle>
                        </svg>
                        <div class="absolute inset-0 m-2 rounded-full overflow-hidden border-2 border-transparent bg-black flex items-center justify-center">
                            <img src="https://ui-avatars.com/api/?name=Flavien+R&background=ccff00&color=000&font-size=0.4&bold=true" class="w-full h-full object-cover" alt="Avatar">
                        </div>
                        <div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 bg-white text-black text-[10px] font-black uppercase tracking-widest px-4 py-1.5 rounded-full border-2 border-black">
                            LVL <span id="profile-lvl">1</span>
                        </div>
                    </div>
                    <h2 class="text-3xl font-black mb-1 relative z-10 text-white" id="profile-name">Flavien R.</h2>
                    <p class="text-xs text-gray-400 font-bold uppercase tracking-widest relative z-10 mb-6" id="profile-bio">L2 Maths ‚Ä¢ CEO</p>
                    <button class="bg-gray-800 border border-white-10 px-6 py-3 rounded-full text-xs font-bold text-white hover:bg-gray-700 active:scale-95 transition-all relative z-10 flex items-center gap-2 shadow-lg" onclick="App.showModal('settings-sheet')">
                        <i class="fas fa-cog"></i> Modifier Profil
                    </button>
                </div>
                
                <div class="px-6 py-8 flex flex-col gap-8 pb-32">
                    
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-gray-900 rounded-[24px] p-4 flex flex-col items-center justify-center border border-white-5 shadow-md">
                            <i class="fas fa-tree text-blue-500 mb-2"></i>
                            <span class="text-2xl font-black text-white" id="stat-parks">0</span>
                            <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">For√™ts</span>
                        </div>
                        <div class="bg-gray-900 rounded-[24px] p-4 flex flex-col items-center justify-center border border-white-5 shadow-md">
                            <i class="fas fa-fire text-red-500 mb-2"></i>
                            <span class="text-2xl font-black text-white" id="stat-kcal">0</span>
                            <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Kcal</span>
                        </div>
                        <div class="bg-gray-900 rounded-[24px] p-4 flex flex-col items-center justify-center border border-white-5 shadow-md">
                            <i class="fas fa-dumbbell text-volt mb-2"></i>
                            <span class="text-2xl font-black text-white" id="stat-acts">0</span>
                            <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Actes</span>
                        </div>
                    </div>
                    
                    <div class="flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-black text-white">Scanner Corporel</h3>
                            <i class="fas fa-microchip text-gray-600"></i>
                        </div>
                        <div class="w-full bg-gray-900 rounded-[32px] p-6 border border-white-5 flex flex-col items-center relative overflow-hidden shadow-lg">
                            <div class="absolute top-0 right-0 w-32 h-32 bg-volt opacity-5 rounded-full blur-2xl pointer-events-none"></div>
                            <p class="text-xs text-gray-400 font-medium text-center mb-6 z-10">Analyse algorithmique des 10 capacit√©s.</p>
                            <div class="w-full max-w-[250px] aspect-square relative z-10 mb-6">
                                <canvas id="radar-chart-canvas"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-col">
                        <h3 class="text-xl font-black mb-4 text-white">Objectif 80 KG</h3>
                        <div class="w-full bg-gray-900 rounded-[32px] p-6 border border-white-5 flex flex-col gap-4 shadow-lg">
                            <div class="flex items-center gap-4 mb-2">
                                <div class="w-12 h-12 rounded-2xl bg-gray-800 flex items-center justify-center text-white border border-white-5"><i class="fas fa-weight"></i></div>
                                <div class="flex flex-col">
                                    <span class="font-bold text-sm text-white">Masse Corporelle</span>
                                    <span class="text-xs text-gray-500 font-medium">Saisie manuelle pour suivi.</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-center gap-3 w-full bg-gray-800 rounded-2xl p-2 border border-white-10 focus-within:border-volt transition-colors">
                                <input type="number" id="input-weight" class="flex-1 bg-transparent text-center font-black text-2xl outline-none text-white placeholder-gray-600 w-full ml-4" placeholder="Ex: 80">
                                <span class="text-gray-500 font-bold pr-2">KG</span>
                                <button class="bg-white text-black font-black px-6 py-3 rounded-xl active:scale-95 transition-transform" onclick="App.saveWeight()">LOG</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-col">
                        <h3 class="text-xl font-black mb-4 text-white">Donn√©es S√©curis√©es</h3>
                        <div class="flex flex-col gap-3">
                            <button class="w-full bg-gray-900 rounded-2xl p-5 border border-white-5 flex items-center justify-between active:scale-95 transition-transform shadow-md" onclick="App.showModal('history-sheet')">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 rounded-xl bg-blue-500/10 text-blue-500 flex items-center justify-center"><i class="fas fa-history"></i></div>
                                    <span class="font-bold text-sm text-white">Carnet d'Exp√©ditions</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-600 text-xs"></i>
                            </button>
                            <button class="w-full bg-gray-900 rounded-2xl p-5 border border-white-5 flex items-center justify-between active:scale-95 transition-transform shadow-md" onclick="App.showModal('inventory-sheet')">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 rounded-xl bg-yellow-500/10 text-yellow-500 flex items-center justify-center"><i class="fas fa-box-open"></i></div>
                                    <span class="font-bold text-sm text-white">Inventaire Tactique</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-600 text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <nav class="fixed bottom-0 left-0 w-full px-6 z-50 pointer-events-none pt-4" style="padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 16px);">
            <div class="w-full h-16 rounded-[24px] bg-gray-900/90 backdrop-blur-xl border border-white-10 flex items-center justify-between px-6 shadow-2xl pointer-events-auto">
                <button class="nav-item flex-1 flex flex-col items-center justify-center gap-1 text-white transition-colors h-full relative" id="nav-home" onclick="App.nav('view-home', this)">
                    <i class="fas fa-home text-xl"></i>
                    <div class="indicator absolute bottom-1 w-1 h-1 rounded-full bg-white transition-all"></div>
                </button>
                <button class="nav-item flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 transition-colors h-full relative" id="nav-explore" onclick="App.nav('view-explore', this)">
                    <i class="fas fa-map text-xl"></i>
                    <div class="indicator absolute bottom-1 w-1 h-1 rounded-full bg-volt opacity-0 transition-all"></div>
                </button>
                <button class="nav-item flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 transition-colors h-full relative" id="nav-challenges" onclick="App.nav('view-challenges', this)">
                    <i class="fas fa-crosshairs text-xl"></i>
                    <div class="indicator absolute bottom-1 w-1 h-1 rounded-full bg-volt opacity-0 transition-all"></div>
                </button>
                <button class="nav-item flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 transition-colors h-full relative" id="nav-academy" onclick="App.nav('view-academy', this)">
                    <i class="fas fa-book-open text-xl"></i>
                    <div class="indicator absolute bottom-1 w-1 h-1 rounded-full bg-volt opacity-0 transition-all"></div>
                </button>
                <button class="nav-item flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 transition-colors h-full relative" id="nav-social" onclick="App.nav('view-social', this)">
                    <i class="fas fa-users text-xl"></i>
                    <div class="indicator absolute bottom-1 w-1 h-1 rounded-full bg-volt opacity-0 transition-all"></div>
                </button>
                <button class="nav-item hidden" id="nav-profile"></button>
            </div>
        </nav>
    </div>

    <div id="modal-backdrop" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-40 opacity-0 pointer-events-none transition-opacity duration-300" onclick="App.closeAllModals()"></div>

    <div id="modal-layer" class="fixed inset-0 z-50 pointer-events-none overflow-hidden">
        
        <div id="route-preview-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[85vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-32 hide-scrollbar relative">
                <div class="w-full h-48 rounded-[24px] bg-gray-800 mb-6 relative overflow-hidden border border-white-5">
                    <img id="sheet-img" src="" class="w-full h-full object-cover opacity-80" alt="Preview">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40 to-transparent"></div>
                    <div class="absolute bottom-4 left-4">
                        <span id="sheet-type" class="text-[10px] font-bold text-volt uppercase tracking-widest mb-1 block drop-shadow-md">Type</span>
                        <h2 id="sheet-title" class="text-3xl font-black text-white leading-none drop-shadow-lg">Titre</h2>
                    </div>
                </div>
                <div class="flex justify-between border-b border-white-10 pb-4 mb-4">
                    <div class="flex flex-col"><span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Dur√©e</span><span id="sheet-time" class="text-lg font-black text-white">--</span></div>
                    <div class="flex flex-col"><span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Calories</span><span id="sheet-kcal" class="text-lg font-black text-white">--</span></div>
                    <div class="flex flex-col text-right"><span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Niveau</span><span id="sheet-level" class="text-lg font-black text-white">--</span></div>
                </div>
                <h3 class="text-lg font-black mb-4 text-white">Ateliers (Checkpoints)</h3>
                <div id="sheet-checkpoints" class="flex flex-col gap-4 border-l-2 border-white-10 pl-4 ml-2 mb-8"></div>
            </div>
            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-gray-900 via-gray-900 to-transparent pt-12 pb-safe pointer-events-none">
                <button class="w-full bg-white text-black font-black text-lg py-5 rounded-[24px] transition-transform active:scale-95 flex items-center justify-center gap-2 shadow-lg pointer-events-auto" onclick="App.triggerWarmup()">
                    D√âMARRER LA SESSION <i class="fas fa-play text-sm ml-1"></i>
                </button>
            </div>
        </div>

        <div id="settings-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[70vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <h2 class="text-3xl font-black mb-6 text-white">Param√®tres</h2>
                <div class="flex flex-col gap-4 mb-8">
                    <div class="flex flex-col gap-2">
                        <label class="text-[10px] font-bold text-gray-500 uppercase tracking-widest pl-2">Nom de code</label>
                        <input type="text" id="set-name" class="bg-gray-800 border border-white-10 rounded-2xl p-4 text-white font-bold outline-none focus:border-volt transition-colors">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-[10px] font-bold text-gray-500 uppercase tracking-widest pl-2">Bio / Affectation</label>
                        <input type="text" id="set-bio" class="bg-gray-800 border border-white-10 rounded-2xl p-4 text-white font-bold outline-none focus:border-volt transition-colors">
                    </div>
                    <button class="w-full bg-volt text-black font-black py-4 rounded-2xl mt-2 active:scale-95 transition-transform" onclick="App.saveSettings()">SAUVEGARDER</button>
                </div>
                <h3 class="text-lg font-black mb-4 text-white">Syst√®me</h3>
                <div class="flex flex-col gap-3">
                    <div class="bg-gray-800 rounded-2xl p-4 border border-white-5 flex items-center justify-between">
                        <span class="font-bold text-sm text-white">Particules (60fps)</span>
                        <div class="w-12 h-6 bg-volt rounded-full p-1 flex justify-end cursor-pointer"><div class="w-4 h-4 bg-black rounded-full shadow-sm"></div></div>
                    </div>
                    <button class="bg-red-500/10 text-red-500 border border-red-500/20 rounded-2xl p-4 font-bold text-sm flex items-center justify-center gap-2 mt-4 active:scale-95 transition-transform" onclick="App.resetData()">
                        <i class="fas fa-skull"></i> PURGER LES DONN√âES
                    </button>
                </div>
            </div>
        </div>

        <div id="history-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[80vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <h2 class="text-3xl font-black mb-6 text-white">Historique</h2>
                <div id="history-container" class="flex flex-col gap-3"></div>
            </div>
        </div>

        <div id="inventory-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[80vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <h2 class="text-3xl font-black mb-6 text-white">Sac Tactique</h2>
                <div id="inventory-container" class="flex flex-col gap-3"></div>
            </div>
        </div>

        <div id="article-fondamentaux-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[90vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <div class="w-full h-48 rounded-[24px] bg-gray-800 mb-6 overflow-hidden relative border border-white-5">
                    <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=800" class="w-full h-full object-cover opacity-60" alt="Article">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                </div>
                <span class="text-[10px] font-bold text-blue-500 uppercase tracking-widest mb-2 block">Dossier Th√©orique</span>
                <h2 class="text-3xl font-black mb-6 text-white">Les 10 Familles du Mouvement</h2>
                <div class="text-gray-300 text-sm leading-relaxed flex flex-col gap-4">
                    <p>L'H√©bertisme repose sur un principe fondateur : le d√©veloppement complet et utilitaire du corps humain. La musculation isol√©e n'a pas sa place ici.</p>
                    <ul class="list-disc pl-5 flex flex-col gap-2 text-gray-400">
                        <li><strong class="text-white">D√©placements :</strong> Marche, Course, Quadrup√©die, Natation.</li>
                        <li><strong class="text-white">Franchissements :</strong> Saut, Grimper, √âquilibre.</li>
                        <li><strong class="text-white">Manipulations :</strong> Lancer, Lever, D√©fense.</li>
                    </ul>
                    <div class="bg-gray-800 border-l-4 border-blue-500 p-4 rounded-r-xl mt-4">
                        <p class="italic text-white font-medium m-0">"√ätre fort pour √™tre utile." - Georges H√©bert</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="article-physio-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[90vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <div class="w-full h-48 rounded-[24px] bg-gray-800 mb-6 overflow-hidden relative border border-white-5">
                    <img src="https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?q=80&w=800" class="w-full h-full object-cover opacity-60" alt="Cardio">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                </div>
                <span class="text-[10px] font-bold text-volt uppercase tracking-widest mb-2 block">Dossier Scientifique</span>
                <h2 class="text-3xl font-black mb-6 text-white">Physiologie de l'effort</h2>
                <div class="text-gray-300 text-sm leading-relaxed flex flex-col gap-4">
                    <p>En pleine nature, le rythme cardiaque ne ment pas. Les surfaces instables (boue, branches) forcent un recrutement musculaire profond qu'aucune salle de sport ne peut reproduire.</p>
                    <h4 class="text-white font-bold text-lg mt-2">La Proprioception</h4>
                    <p>Chaque pas en for√™t exige des micro-ajustements de la cheville et du genou. C'est le syst√®me nerveux central qui cartographie le terrain en temps r√©el.</p>
                    <div class="flex items-center gap-4 bg-gray-800 p-4 rounded-2xl mt-2 border border-white-5">
                        <i class="fas fa-heartbeat text-volt text-2xl"></i>
                        <p class="text-xs text-gray-400 m-0"><strong class="text-white block">Zone Cardio 2 :</strong> Id√©ale pour l'endurance fondamentale (60-70% FCM).</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="article-survie-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[90vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <div class="w-full h-48 rounded-[24px] bg-gray-800 mb-6 overflow-hidden relative border border-white-5">
                    <img src="https://images.unsplash.com/photo-1444124818704-4d89a495bbae?q=80&w=800" class="w-full h-full object-cover opacity-60" alt="Survie">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                </div>
                <span class="text-[10px] font-bold text-warning uppercase tracking-widest mb-2 block text-yellow-500">Dossier Tactique</span>
                <h2 class="text-3xl font-black mb-6 text-white">R√®gles de Survie</h2>
                <div class="text-gray-300 text-sm leading-relaxed flex flex-col gap-4">
                    <p>La for√™t bretonne peut √™tre impitoyable. Temp√©rature qui chute, pluie soudaine, d√©sorientation. Ne partez jamais sans pr√©paration.</p>
                    <ul class="list-disc pl-5 flex flex-col gap-2 text-gray-400">
                        <li><strong class="text-white">R√®gle de 3 :</strong> 3h sans abri, 3 jours sans eau, 3 semaines sans manger.</li>
                        <li><strong class="text-white">Hypothermie :</strong> Le vent et l'humidit√© tuent plus vite que le froid sec.</li>
                        <li><strong class="text-white">Feu :</strong> Le bois mort sur pied est toujours plus sec que le bois au sol.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="article-histoire-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[90vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar">
                <div class="w-full h-48 rounded-[24px] bg-gray-800 mb-6 overflow-hidden relative border border-white-5">
                    <img src="https://images.unsplash.com/photo-1596163351954-47c179c32187?q=80&w=800" class="w-full h-full object-cover opacity-60 grayscale" alt="Histoire">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                </div>
                <span class="text-[10px] font-bold text-blue-500 uppercase tracking-widest mb-2 block">Dossier Historique</span>
                <h2 class="text-3xl font-black mb-6 text-white">L'Histoire d'H√©bert</h2>
                <div class="text-gray-300 text-sm leading-relaxed flex flex-col gap-4">
                    <p>En 1902, la Montagne Pel√©e entre en √©ruption en Martinique. L'officier de marine Georges H√©bert coordonne le sauvetage de 700 personnes.</p>
                    <p>Il constate avec effroi que la majorit√© des victimes auraient pu survivre si elles avaient √©t√© capables de courir, sauter ou nager correctement.</p>
                    <div class="bg-gray-800 border-l-4 border-white p-4 rounded-r-xl mt-2">
                        <p class="text-gray-400 m-0 text-xs">C'est de cette trag√©die qu'est n√©e la m√©thode naturelle : un entra√Ænement utilitaire, loin de la gymnastique su√©doise de l'√©poque, pour forger des hommes et des femmes capables d'affronter le r√©el.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="weather-sheet" class="modal-sheet absolute bottom-0 left-0 w-full bg-gray-900 rounded-t-[32px] border-t border-white-10 transform translate-y-full transition-transform duration-500 ease-spring pointer-events-auto flex flex-col h-[75vh]">
            <div class="w-full py-4 flex items-center justify-center cursor-pointer" onclick="App.closeAllModals()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto px-6 pb-12 hide-scrollbar flex flex-col items-center">
                <i class="fas fa-cloud-showers-heavy text-6xl text-blue-500 mb-6 mt-4 drop-shadow-md"></i>
                <h2 class="text-6xl font-black text-white leading-none mb-2">12¬∞C</h2>
                <p class="text-blue-400 font-bold tracking-widest uppercase text-xs mb-8">Rennes M√©tropole</p>
                
                <div class="w-full bg-gray-800 rounded-[24px] p-5 border border-white-5 flex flex-col gap-4 mb-6 w-full">
                    <div class="flex justify-between items-center border-b border-white-5 pb-3">
                        <span class="text-gray-400 text-sm font-medium">Humidit√© (Terrains glissants)</span>
                        <span class="text-white font-bold text-sm">85%</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-white-5 pb-3">
                        <span class="text-gray-400 text-sm font-medium">Vent (Prudence branches)</span>
                        <span class="text-white font-bold text-sm">22 km/h NO</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400 text-sm font-medium">Qualit√© de l'air</span>
                        <span class="text-volt font-bold text-sm">Excellente</span>
                    </div>
                </div>
                
                <p class="text-center text-xs text-gray-500 italic">"Il n'y a pas de mauvaise m√©t√©o, que des √©quipements inadapt√©s."</p>
            </div>
        </div>

    </div>

    <div id="warmup-overlay" class="fixed inset-0 z-[150] bg-gray-950 flex-col items-center justify-center opacity-0 transition-opacity duration-500 pointer-events-auto hidden">
        <div class="absolute inset-0 bg-blue-500/5 mix-blend-overlay"></div>
        <h2 class="text-3xl font-black text-white mb-2 relative z-10 text-center uppercase tracking-widest text-blue-400">√âchauffement</h2>
        <p class="text-gray-400 font-medium mb-12 relative z-10 text-center px-8">Pr√©parez vos articulations (Poignets, Chevilles, √âpaules).</p>
        
        <div class="relative w-48 h-48 flex items-center justify-center mb-12">
            <svg class="absolute inset-0 w-full h-full transform -rotate-90" viewBox="0 0 120 120">
                <circle cx="60" cy="60" r="54" fill="none" stroke="rgba(59, 130, 246, 0.2)" stroke-width="6"></circle>
                <circle id="warmup-ring" cx="60" cy="60" r="54" fill="none" stroke="#3b82f6" stroke-width="6" stroke-dasharray="339.29" stroke-dashoffset="0" class="transition-all ease-linear" stroke-linecap="round"></circle>
            </svg>
            <span id="warmup-timer" class="text-6xl font-black text-white relative z-10">30</span>
        </div>
        
        <button class="text-gray-500 text-sm font-bold border-b border-gray-500 pb-1 hover:text-white transition-colors relative z-10 active:scale-95" onclick="App.skipWarmup()">PASSER (D√âCONSEILL√â)</button>
    </div>

    <div id="session-active-modal" class="fixed inset-0 z-[160] bg-black flex flex-col transform translate-y-full transition-transform duration-500 pointer-events-auto">
        <div class="w-full px-6 pt-safe pb-4 flex justify-between items-center border-b border-white-10 bg-gray-900/50 backdrop-blur-md">
            <button class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-white active:scale-90 transition-transform" onclick="App.abortSession()"><i class="fas fa-times"></i></button>
            <div class="flex items-center gap-2 bg-gray-800 px-4 py-2 rounded-full border border-white-10">
                <div class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></div>
                <span class="text-xs font-bold tracking-widest uppercase text-white">En cours</span>
            </div>
        </div>
        <div class="flex-1 flex flex-col items-center justify-center px-8 relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none">
                <i class="fas fa-dumbbell text-[20rem]"></i>
            </div>
            <div class="w-full h-2 bg-gray-800 rounded-full mb-8 overflow-hidden">
                <div id="session-progress" class="h-full bg-volt rounded-full transition-all duration-500" style="width: 0%;"></div>
            </div>
            <span class="text-[10px] font-bold text-volt uppercase tracking-widest mb-3 border border-volt/30 bg-volt/10 px-4 py-1.5 rounded-full">Atelier <span id="session-step-current">1</span>/<span id="session-step-total">X</span></span>
            <h2 id="session-step-title" class="text-4xl font-black text-center mb-6 leading-tight text-white drop-shadow-md">Titre</h2>
            <p id="session-step-desc" class="text-center text-gray-300 text-lg leading-relaxed font-medium">Description de l'action √† r√©aliser.</p>
        </div>
        <div class="w-full p-8 pb-safe bg-gradient-to-t from-black via-black/80 to-transparent">
            <button class="w-full bg-white text-black font-black text-xl py-6 rounded-[24px] shadow-[0_10px_30px_rgba(255,255,255,0.15)] transition-transform active:scale-95 flex items-center justify-center gap-3" onclick="document.getElementById('native-camera-input').click()">
                VALIDER L'ACTION <i class="fas fa-camera"></i>
            </button>
            <input type="file" id="native-camera-input" accept="image/*" capture="environment" class="hidden" onchange="App.handleNativePhoto(event)">
        </div>
    </div>

    <div id="cooldown-overlay" class="fixed inset-0 z-[170] bg-gray-950 flex-col items-center justify-center opacity-0 transition-opacity duration-500 pointer-events-auto hidden">
        <div class="absolute inset-0 bg-volt/5 mix-blend-overlay"></div>
        <h2 class="text-3xl font-black text-white mb-2 relative z-10 text-center uppercase tracking-widest text-volt">R√©cup√©ration</h2>
        <p class="text-gray-400 font-medium mb-12 relative z-10 text-center px-8">Marchez lentement. √âtirez les cha√Ænes musculaires sollicit√©es.</p>
        
        <div class="relative w-48 h-48 flex items-center justify-center mb-12">
            <svg class="absolute inset-0 w-full h-full transform -rotate-90" viewBox="0 0 120 120">
                <circle cx="60" cy="60" r="54" fill="none" stroke="rgba(204, 255, 0, 0.1)" stroke-width="6"></circle>
                <circle id="cooldown-ring" cx="60" cy="60" r="54" fill="none" stroke="#ccff00" stroke-width="6" stroke-dasharray="339.29" stroke-dashoffset="0" class="transition-all ease-linear" stroke-linecap="round"></circle>
            </svg>
            <span id="cooldown-timer" class="text-6xl font-black text-white relative z-10">30</span>
        </div>
        
        <button class="text-gray-500 text-sm font-bold border-b border-gray-500 pb-1 hover:text-white transition-colors relative z-10 active:scale-95" onclick="App.finishCooldown()">TERMINER</button>
    </div>

    <div id="toast-container" class="fixed top-safe left-0 w-full px-6 flex flex-col gap-2 z-[200] pointer-events-none"></div>

    <script src="script.js"></script>
</body>
</html>
